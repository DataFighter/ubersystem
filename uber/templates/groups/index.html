{% extends "base-admin.html" %}

{% block title %}
    Group Admin
{% endblock title %}

{% block content %}

<script type="text/javascript">
    function toggleDisplay(dropdown) {
        window.location = "index?order={{ order }}&show=" + $(dropdown).val();
    }
</script>

<ol class="breadcrumb">
  <li><a href="../accounts/homepage">Home</a></li>
  <li>People</li>
  <li class="active">Groups</li>
</ol>

<ul>
    <li>
        <strong>Total:</strong> {{ total_groups }} groups ({{ total_badges }} badges, {{ tables }} tables)
    </li>
    <li>
        <strong>With Tables:</strong> {{ tabled_groups }} groups ({{ tabled_badges }} badges)
    </li>
    <li>
        <strong>Without Tables:</strong> {{ untabled_groups }} groups ({{ untabled_badges }} badges)
    </li>
    <li>
        {{ approved_tables }} approved tables / {{ waitlisted_tables }} waitlisted tables / {{ unapproved_tables }} unapproved tables
    </li>
</ul>

<ul>
    <li>
        <a class="btn" href="form?id=None">
            Add a Group
        </a>
    </li>
    <li>
        <a class="btn" href="form?id=None&new_dealer=true">
            Add a Dealer
        </a>
    </li>
    <li>
        <a class="btn" href="">
            Add a Band
        </a>
    </li>
</ul>

<ul>
    <li {% if show == "all" %}class="active"{% endif %}>
        <a href="index?order=name&show=all">
            All
        </a>
    </li>
    <li {% if show == "tables" %}class="active"{% endif %}>
        <a href="index?order=name&show=tables">
            Tables
        </a>
    </li>
    <li {% if show == "groups" %}class="active"{% endif %}>
        <a href="index?order=name&show=groups">
            Groups
        </a>
    </li>
</ul>

<table class="striped">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                Approved
            </th>
            <th>
                Badges{% popup_link "../static_views/badgeCounts.html" %}
            </th>
            <th>
                Tables
            </th>
            <th>
                Cost
            </th>
            <th>
                Owed
            </th>
            <th>
                Paid
            </th>
            <th>
                Admin Notes
            </th>
        </tr>
    </thead>

    <tbody>
    {% for group in groups %}
        <tr>
            <td data-order="{{ group.name }}" data-search="{{ group.name }}">
                <a href="form?id={{ group.id }}">
                    {{ group.name|default:"?????" }}
                </a>
            </td>
            <td>
                {% if group.is_dealer %}
                    {{ group.status_label }}
                {% else %}
                    n/a
                {% endif %}
            </td>
            <td data-order="{{ group.badges_purchased }}" data-search="{{ group.badges_purchased }}">
                {{ group.badges_purchased }} / {{ group.badges }}
            </td>
            <td>
                {{ group.tables }}
            </td>
            <td>
                ${{ group.cost }}
            </td>
            <td>
                ${{ group.amount_unpaid }}
            </td>
            <td>
                ${{ group.amount_paid }}
            </td>
            <td>
                {{ group.admin_notes }}
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

    <ul class="pagination"></ul>

{% endblock content %}
