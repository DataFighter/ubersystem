{% extends "base-admin.html" %}

{% block title %}
    Staffer Signups
{% endblock title %}

{% block content %}

{% include "jobs/job_menu.html" %}

<h3>
    {% timespan job %} {{ job.name }} shift in {{ job.location_label }}
</h3>

{% if job.shifts|length < job.slots %}
    <form method="post" action="assign_from_job">
    {% csrf_token %}
    <input type="hidden" name="job_id" value="{{ job.id }}" />
    {% if attendees %}
        <b>Assign Staffer:</b>
        <select name="staffer_id">
            {% options attendees %}
        </select>
        <input type="submit" value="Assign" />
    {% else %}
        No staffers available for this shift.
    {% endif %}
    </form>
{% endif %}

{% if job.shifts %}
    This job has {{ job.slots }} slot{{ job.slots|pluralize }} and {{ job.shifts|length }} staffer{{ job.shifts|length|pluralize:" is,s are" }} signed up:
    <table>
    {% for shift in job.shifts %}
        <tr>
            <td></td>
            <td>
                <a href="../registration/shifts?id={{ shift.attendee.id }}">
                    {{ shift.attendee.full_name }}
                </a>
            </td>

            <form method="post" action="unassign_from_job">
            {% csrf_token %}
            <input type="hidden" name="id" value="{{ shift.id }}" />
                <td>
                    <input type="submit" value="Unassign" />
                </td>
            </form>

    {% endfor %}
    </table>
{% else %}
    No staffers are currently signed up for this shift, which has {{ job.slots }} slot{{ job.slots|pluralize }}
{% endif %}

{% endblock %}
